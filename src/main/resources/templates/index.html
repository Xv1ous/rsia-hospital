<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
  <!-- Head Fragment -->
  <head th:replace="~{fragments/head :: head}"></head>

  <body class="bg-gray-50 text-gray-900 font-sans antialiased">
    <!-- Skip to main content for accessibility -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary text-white px-4 py-2 rounded-lg z-50"
    >
      Skip to main content
    </a>

    <!-- Main Content for Pamulang (default) -->
    <main id="main-content" class="hospital-pamulang">
      <!-- Flowbite Responsive Navbar -->
      <header th:replace="~{fragments/navbar :: navbar}"></header>

      <!-- Hero Section -->
      <section th:replace="~{fragments/hero :: hero}"></section>

      <!-- About/Values Section -->
      <section th:replace="~{fragments/about :: about}"></section>

      <!-- Doctor Schedule Section -->
      <section th:replace="~{fragments/schedule :: schedule}"></section>

      <!-- Specializations Slider Section -->
      <!-- <section th:replace="~{fragments/specializations :: specializations}"></section>-->

      <!-- News/Berita Section -->
      <section th:replace="~{fragments/news :: news}"></section>

      <!-- Testimonial Section -->
      <section th:replace="~{fragments/testimonial :: testimonial}"></section>

      <!-- Partners Section -->
      <!-- <section th:replace="~{fragments/partners :: partners}"></section> -->

      <!-- Location/Contact Section -->
      <section th:replace="~{fragments/contact :: contact}"></section>
    </main>

    <!-- Footer Section -->
    <footer th:replace="~{fragments/footer :: footer}"></footer>

    <!-- Modal Fragment -->
    <div th:replace="~{fragments/modal :: janji-modal}"></div>

    <!-- Loading Indicator -->
    <div
      id="loading-indicator"
      class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center hidden"
    >
      <div class="bg-white rounded-2xl p-8 shadow-2xl">
        <div
          class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"
        ></div>
        <p class="text-gray-600 mt-4 text-center">Loading...</p>
      </div>
    </div>

    <!-- Back to top button -->
    <button
      id="back-to-top"
      class="fixed bottom-8 right-8 bg-primary text-white p-3 rounded-full shadow-lg hover:bg-primary/90 transition-all duration-300 opacity-0 invisible z-40"
      aria-label="Back to top"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M5 10l7-7m0 0l7 7m-7-7v18"
        ></path>
      </svg>
    </button>

    <!-- Performance and UX Scripts -->
    <script>
      // Back to top functionality
      document.addEventListener("DOMContentLoaded", function () {
        const backToTopBtn = document.getElementById("back-to-top");

        window.addEventListener("scroll", function () {
          if (window.pageYOffset > 300) {
            backToTopBtn.classList.remove("opacity-0", "invisible");
            backToTopBtn.classList.add("opacity-100", "visible");
          } else {
            backToTopBtn.classList.add("opacity-0", "invisible");
            backToTopBtn.classList.remove("opacity-100", "visible");
          }
        });

        backToTopBtn.addEventListener("click", function () {
          window.scrollTo({
            top: 0,
            behavior: "smooth",
          });
        });
      });

      // Loading indicator
      window.addEventListener("beforeunload", function () {
        document.getElementById("loading-indicator").classList.remove("hidden");
      });

      // Intersection Observer for lazy loading
      if ("IntersectionObserver" in window) {
        const observerOptions = {
          rootMargin: "50px",
          threshold: 0.1,
        };

        const observer = new IntersectionObserver(function (entries) {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.classList.add("fade-in");
              observer.unobserve(entry.target);
            }
          });
        }, observerOptions);

        // Observe all sections for lazy loading
        document.querySelectorAll("section").forEach((section) => {
          observer.observe(section);
        });
      }
    </script>
  </body>
</html>

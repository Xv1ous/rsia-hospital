<!DOCTYPE html>
<html lang="id" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel - RSIA Buah Hati</title>
    <link href="/main.css" rel="stylesheet" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-orange: #e6521f;
        --primary-orange-light: #ffede6;
        --primary-orange-dark: #b13a17;
      }
      .text-primary-orange {
        color: var(--primary-orange) !important;
      }
      .bg-primary-orange {
        background-color: var(--primary-orange) !important;
      }
      .bg-primary-orange-light {
        background-color: var(--primary-orange-light) !important;
      }
      .bg-primary-orange-dark {
        background-color: var(--primary-orange-dark) !important;
      }
      .font-sans {
        font-family: "Inter", "Segoe UI", "Roboto", "Helvetica Neue", Arial,
          "sans-serif";
      }

      /* Modal scrolling improvements */
      .modal-scroll {
        scrollbar-width: thin;
        scrollbar-color: #cbd5e0 #f7fafc;
      }

      .modal-scroll::-webkit-scrollbar {
        width: 6px;
      }

      .modal-scroll::-webkit-scrollbar-track {
        background: #f7fafc;
        border-radius: 3px;
      }

      .modal-scroll::-webkit-scrollbar-thumb {
        background: #cbd5e0;
        border-radius: 3px;
      }

      .modal-scroll::-webkit-scrollbar-thumb:hover {
        background: #a0aec0;
      }
    </style>
  </head>
  <body class="bg-gray-50 text-gray-900 font-sans">
    <!-- CSRF Token -->
    <input type="hidden" name="_csrf" th:value="${_csrf.token}" />

    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside
        class="w-64 bg-[#E6521F] text-white flex-col py-8 px-4 hidden md:flex"
      >
        <div class="text-2xl font-bold mb-8 flex items-center gap-2">
          <img
            src="/asset hospital/RSIA_BHP_LOGO5.png"
            alt="Logo"
            class="h-10 w-10 bg-white rounded-full p-1"
          />
          Admin Panel
        </div>
        <nav class="flex flex-col gap-4 mt-4">
          <a href="/admin" class="hover:text-[#FF8000] font-semibold"
            >Dashboard</a
          >
          <a href="/admin/appointments" class="hover:text-[#FF8000]"
            >Janji Temu</a
          >
          <a href="/admin/doctors" class="hover:text-[#FF8000]">Dokter</a>
          <a href="/admin/page-contents" class="hover:text-[#FF8000]"
            >Konten Halaman</a
          >
        </nav>
        <div class="mt-auto pt-8">
          <a
            href="/"
            class="block text-center px-4 py-2 rounded bg-white text-[#E6521F] font-semibold hover:bg-[#FF8000] hover:text-white transition"
            >Kembali ke Beranda</a
          >
        </div>
      </aside>
      <!-- Main Content -->
      <div class="flex-1 flex flex-col">
        <!-- Topbar -->
        <header
          class="bg-[#E6521F] shadow px-4 py-4 flex items-center justify-between sticky top-0 z-10"
        >
          <nav aria-label="Breadcrumb">
            <ol class="flex items-center space-x-2 text-sm text-white">
              <li><a href="/" class="hover:underline">Beranda</a></li>
              <li><span class="mx-2">/</span></li>
              <li class="font-semibold">Admin Panel</li>
            </ol>
          </nav>
          <div class="flex items-center gap-4">
            <span class="font-semibold text-white">Admin</span>
            <img
              src="/asset hospital/RSIA_BHP_LOGO5.png"
              alt="Admin Avatar"
              class="h-8 w-8 rounded-full border-2 border-white"
            />
          </div>
        </header>
        <!-- Dashboard Overview Cards -->
        <section class="p-6">
          <h2 class="text-2xl font-bold text-[#17695b] mb-6">
            Dashboard Overview
          </h2>
          <div
            class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
          >
            <!-- Total Appointments -->
            <div
              class="bg-blue-50 rounded-xl shadow p-6 border-l-4 border-blue-500"
            >
              <div class="flex items-center justify-between">
                <div>
                  <div
                    class="text-3xl font-bold text-blue-600 mb-2"
                    th:text="${appointments.size()}"
                  >
                    0
                  </div>
                  <div class="text-blue-800 font-semibold">
                    Total Janji Temu
                  </div>
                </div>
                <div
                  class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center"
                >
                  <svg
                    class="w-6 h-6 text-blue-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                    ></path>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Active Doctors -->
            <div
              class="bg-green-50 rounded-xl shadow p-6 border-l-4 border-green-500"
            >
              <div class="flex items-center justify-between">
                <div>
                  <div
                    class="text-3xl font-bold text-green-600 mb-2"
                    th:text="${doctors.size()}"
                  >
                    0
                  </div>
                  <div class="text-green-800 font-semibold">Dokter Aktif</div>
                </div>
                <div
                  class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center"
                >
                  <svg
                    class="w-6 h-6 text-green-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                    ></path>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Page Contents -->
            <div
              class="bg-purple-50 rounded-xl shadow p-6 border-l-4 border-purple-500"
            >
              <div class="flex items-center justify-between">
                <div>
                  <div
                    class="text-3xl font-bold text-purple-600 mb-2"
                    th:text="${pageContents.size()}"
                  >
                    0
                  </div>
                  <div class="text-purple-800 font-semibold">
                    Konten Halaman
                  </div>
                </div>
                <div
                  class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center"
                >
                  <svg
                    class="w-6 h-6 text-purple-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                    ></path>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Recent Activity -->
            <div
              class="bg-orange-50 rounded-xl shadow p-6 border-l-4 border-orange-500"
            >
              <div class="flex items-center justify-between">
                <div>
                  <div
                    class="text-3xl font-bold text-orange-600 mb-2"
                    th:text="${recentAppointments.size()}"
                  >
                    0
                  </div>
                  <div class="text-orange-800 font-semibold">
                    Janji Hari Ini
                  </div>
                </div>
                <div
                  class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center"
                >
                  <svg
                    class="w-6 h-6 text-orange-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M13 10V3L4 14h7v7l9-11h-7z"
                    ></path>
                  </svg>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Stats -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
            <!-- Appointment Status -->
            <div class="bg-white rounded-xl shadow p-6">
              <h3 class="text-lg font-semibold text-[#17695b] mb-4">
                Status Janji Temu
              </h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Menunggu</span>
                  <span
                    class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold"
                    th:text="${appointments.?[status == 'Menunggu'].size()}"
                    >0</span
                  >
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Terkonfirmasi</span>
                  <span
                    class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold"
                    th:text="${appointments.?[status == 'Terkonfirmasi'].size()}"
                    >0</span
                  >
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Selesai</span>
                  <span
                    class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold"
                    th:text="${appointments.?[status == 'Selesai'].size()}"
                    >0</span
                  >
                </div>
              </div>
            </div>

            <!-- Doctor Status -->
            <div class="bg-white rounded-xl shadow p-6">
              <h3 class="text-lg font-semibold text-[#17695b] mb-4">
                Status Dokter
              </h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Aktif</span>
                  <span
                    class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold"
                    th:text="${doctors.?[isOnLeave == false || isOnLeave == null].size()}"
                    >0</span
                  >
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Cuti</span>
                  <span
                    class="px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold"
                    th:text="${doctors.?[isOnLeave == true].size()}"
                    >0</span
                  >
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Dikunci</span>
                  <span
                    class="px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold"
                    th:text="${doctors.?[isLocked == true].size()}"
                    >0</span
                  >
                </div>
              </div>
            </div>

            <!-- Page Content Types -->
            <div class="bg-white rounded-xl shadow p-6">
              <h3 class="text-lg font-semibold text-[#17695b] mb-4">
                Jenis Konten
              </h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Fasilitas</span>
                  <span
                    class="px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold"
                    th:text="${pageContents.?[pageType == 'FACILITIES'].size()}"
                    >0</span
                  >
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Layanan</span>
                  <span
                    class="px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold"
                    th:text="${pageContents.?[pageType == 'SERVICES'].size()}"
                    >0</span
                  >
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Home Care</span>
                  <span
                    class="px-2 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold"
                    th:text="${pageContents.?[pageType == 'HOMECARE'].size()}"
                    >0</span
                  >
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- Appointments Table -->
        <section id="appointments" class="p-6">
          <div class="flex items-center justify-between mb-6">
            <div>
              <h2 class="text-2xl font-bold text-[#17695b] mb-2">
                Manajemen Janji Temu
              </h2>
              <p class="text-gray-600">Kelola semua janji temu pasien</p>
            </div>
            <button
              id="open-add-appointment-modal"
              class="px-6 py-3 rounded-lg bg-[#E6521F] text-white font-semibold hover:bg-[#FF8000] transition-all duration-300 shadow-lg hover:shadow-xl"
            >
              + Tambah Janji
            </button>
          </div>

          <!-- Quick Stats Bar -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-blue-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-blue-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${appointments.?[status == 'Menunggu'].size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Menunggu</div>
                </div>
              </div>
            </div>
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-green-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-green-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${appointments.?[status == 'Terkonfirmasi'].size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Terkonfirmasi</div>
                </div>
              </div>
            </div>
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-blue-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-blue-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${appointments.?[status == 'Selesai'].size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Selesai</div>
                </div>
              </div>
            </div>
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-purple-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-purple-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${appointments.size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Total</div>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="overflow-x-auto">
              <table class="min-w-full">
                <thead class="bg-[#E6521F] text-white">
                  <tr>
                    <th class="py-4 px-6 text-left font-semibold">
                      Nama Pasien
                    </th>
                    <th class="py-4 px-6 text-left font-semibold">Dokter</th>
                    <th class="py-4 px-6 text-left font-semibold">Tanggal</th>
                    <th class="py-4 px-6 text-left font-semibold">Jam</th>
                    <th class="py-4 px-6 text-left font-semibold">Status</th>
                    <th class="py-4 px-6 text-left font-semibold">Aksi</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                  <tr
                    th:each="appointment : ${appointments}"
                    class="hover:bg-gray-50 transition-colors"
                  >
                    <td class="py-4 px-6">
                      <div class="flex items-center">
                        <div
                          class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3"
                        >
                          <span
                            class="text-blue-600 font-semibold text-sm"
                            th:text="${#strings.substring(appointment.patientName,0,1).toUpperCase()}"
                            >P</span
                          >
                        </div>
                        <span
                          class="font-medium text-gray-900"
                          th:text="${appointment.patientName}"
                        ></span>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center">
                        <div
                          class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3"
                        >
                          <span class="text-green-600 text-sm">👨‍⚕️</span>
                        </div>
                        <div>
                          <span
                            th:each="doc : ${doctors}"
                            th:if="${doc.id} == ${appointment.doctorId}"
                            class="font-medium text-gray-900"
                            th:text="${doc.name}"
                          ></span>
                          <div
                            class="text-sm text-gray-500"
                            th:each="doc : ${doctors}"
                            th:if="${doc.id} == ${appointment.doctorId}"
                            th:text="${doc.specialization}"
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center">
                        <span
                          class="text-gray-900 font-medium"
                          th:text="${appointment.appointmentDate}"
                        ></span>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center">
                        <span
                          class="text-gray-900 font-medium"
                          th:text="${appointment.appointmentTime}"
                        ></span>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <span
                        th:if="${appointment.status == 'Terkonfirmasi'}"
                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800"
                      >
                        <span
                          class="w-2 h-2 bg-green-400 rounded-full mr-2"
                        ></span>
                        Terkonfirmasi
                      </span>
                      <span
                        th:if="${appointment.status == 'Menunggu'}"
                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"
                      >
                        <span
                          class="w-2 h-2 bg-yellow-400 rounded-full mr-2"
                        ></span>
                        Menunggu
                      </span>
                      <span
                        th:if="${appointment.status == 'Selesai'}"
                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800"
                      >
                        <span
                          class="w-2 h-2 bg-blue-400 rounded-full mr-2"
                        ></span>
                        Selesai
                      </span>
                      <span
                        th:if="${appointment.status != 'Terkonfirmasi' and appointment.status != 'Menunggu' and appointment.status != 'Selesai'}"
                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800"
                      >
                        <span
                          class="w-2 h-2 bg-gray-400 rounded-full mr-2"
                        ></span>
                        <span th:text="${appointment.status}"></span>
                      </span>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center space-x-2">
                        <button
                          class="inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors"
                        >
                          <svg
                            class="w-3 h-3 mr-1"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                            ></path>
                          </svg>
                          Edit
                        </button>
                        <button
                          class="inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors"
                        >
                          <svg
                            class="w-3 h-3 mr-1"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                            ></path>
                          </svg>
                          Hapus
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
        <!-- Doctors Management Table -->
        <section id="doctors" class="p-6">
          <div class="flex items-center justify-between mb-6">
            <div>
              <h2 class="text-2xl font-bold text-[#17695b] mb-2">
                Manajemen Dokter
              </h2>
              <p class="text-gray-600">Kelola data dokter dan jadwal praktik</p>
            </div>
            <div class="flex gap-3">
              <button
                id="bulk-actions-btn"
                class="px-4 py-2 rounded-lg bg-gray-500 text-white font-semibold hover:bg-gray-600 transition hidden"
                disabled
              >
                Bulk Actions (<span id="selected-count">0</span>)
              </button>
              <button
                id="open-add-doctor-modal"
                class="px-6 py-3 rounded-lg bg-[#17695b] text-white font-semibold hover:bg-[#2d5a4f] transition-all duration-300 shadow-lg hover:shadow-xl"
              >
                + Tambah Dokter
              </button>
            </div>
          </div>

          <!-- Quick Stats Bar -->
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-green-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-green-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5 13l4 4L19 7"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${doctors.?[isOnLeave == false || isOnLeave == null].size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Aktif</div>
                </div>
              </div>
            </div>
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-red-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-red-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${doctors.?[isOnLeave == true].size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Cuti</div>
                </div>
              </div>
            </div>
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-yellow-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-yellow-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${doctors.?[isLocked == true].size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Dikunci</div>
                </div>
              </div>
            </div>
            <div
              class="bg-white rounded-lg shadow p-4 border-l-4 border-purple-500"
            >
              <div class="flex items-center">
                <div
                  class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-4 h-4 text-purple-600"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
                    ></path>
                  </svg>
                </div>
                <div>
                  <div
                    class="text-2xl font-bold text-gray-800"
                    th:text="${doctors.size()}"
                  >
                    0
                  </div>
                  <div class="text-sm text-gray-600">Total</div>
                </div>
              </div>
            </div>
          </div>

          <div class="bg-white rounded-xl shadow-lg overflow-hidden">
            <div class="overflow-x-auto">
              <table class="min-w-full">
                <thead class="bg-[#17695b] text-white">
                  <tr>
                    <th class="py-4 px-6 text-left">
                      <input
                        type="checkbox"
                        id="select-all-doctors"
                        class="w-4 h-4 text-white bg-transparent border-white rounded focus:ring-white focus:ring-2"
                      />
                    </th>
                    <th class="py-4 px-6 text-left font-semibold">
                      Nama Dokter
                    </th>
                    <th class="py-4 px-6 text-left font-semibold">
                      Spesialisasi
                    </th>
                    <th class="py-4 px-6 text-left font-semibold">
                      Jadwal Praktik
                    </th>
                    <th class="py-4 px-6 text-left font-semibold">Status</th>
                    <th class="py-4 px-6 text-left font-semibold">Aksi</th>
                  </tr>
                </thead>
                <tbody class="divide-y divide-gray-200">
                  <tr
                    th:each="doctor : ${doctorSchedules}"
                    th:if="${doctor != null and doctor.name != null and doctor.name != ''}"
                    class="hover:bg-gray-50 transition-colors"
                  >
                    <td class="py-4 px-6">
                      <input
                        type="checkbox"
                        th:attr="data-id=${doctor.id}"
                        class="doctor-checkbox w-4 h-4 text-[#17695b] bg-gray-100 border-gray-300 rounded focus:ring-[#17695b] focus:ring-2"
                      />
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center">
                        <div
                          class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3"
                        >
                          <span
                            class="text-green-600 font-semibold text-sm"
                            th:text="${#strings.substring(doctor.name,0,1).toUpperCase()}"
                            >D</span
                          >
                        </div>
                        <div>
                          <span
                            class="font-medium text-gray-900"
                            th:text="${doctor.name}"
                          ></span>
                          <div
                            class="text-sm text-gray-500"
                            th:text="${doctor.maxPatientsPerDay != null ? 'Max: ' + doctor.maxPatientsPerDay + ' pasien/hari' : ''}"
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center">
                        <span
                          class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"
                          th:text="${doctor.specialization}"
                        ></span>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex flex-col space-y-1">
                        <div
                          th:each="schedule : ${allDoctorSchedules}"
                          th:if="${schedule.name == doctor.name}"
                          class="flex items-center text-sm"
                        >
                          <span
                            class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs font-medium mr-2"
                            th:text="${schedule.day}"
                            >Hari</span
                          >
                          <span class="text-gray-700" th:text="${schedule.time}"
                            >Jam</span
                          >
                          <span
                            class="text-gray-500 ml-2"
                            th:text="'(' + ${schedule.hospital} + ')'"
                            >(RS)</span
                          >
                        </div>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex flex-wrap gap-1">
                        <!-- Status Cuti -->
                        <span
                          th:if="${doctor.isOnLeave == true}"
                          class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-800"
                        >
                          <span
                            class="w-2 h-2 bg-red-400 rounded-full mr-1"
                          ></span>
                          Cuti
                        </span>
                        <span
                          th:if="${doctor.isOnLeave == false || doctor.isOnLeave == null}"
                          class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800"
                        >
                          <span
                            class="w-2 h-2 bg-green-400 rounded-full mr-1"
                          ></span>
                          Aktif
                        </span>
                        <!-- Status Kunci -->
                        <span
                          th:if="${doctor.isLocked == true}"
                          class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800"
                        >
                          <span
                            class="w-2 h-2 bg-yellow-400 rounded-full mr-1"
                          ></span>
                          Dikunci
                        </span>
                      </div>
                    </td>
                    <td class="py-4 px-6">
                      <div class="flex items-center space-x-2">
                        <button
                          class="inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors"
                          th:attr="id=${'edit-doctor-' + doctor.id},data-id=${doctor.id},data-name=${doctor.name},data-specialization=${doctor.specialization},data-max-patients-per-day=${doctor.maxPatientsPerDay},data-is-on-leave=${doctor.isOnLeave},data-leave-reason=${doctor.leaveReason},data-leave-start-date=${doctor.leaveStartDate},data-leave-end-date=${doctor.leaveEndDate},data-is-locked=${doctor.isLocked},data-lock-reason=${doctor.lockReason},data-lock-start-date=${doctor.lockStartDate},data-lock-end-date=${doctor.lockEndDate}"
                        >
                          <svg
                            class="w-3 h-3 mr-1"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                            ></path>
                          </svg>
                          Edit
                        </button>
                        <button
                          class="schedule-modal-btn inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-green-100 text-green-700 hover:bg-green-200 transition-colors"
                          th:attr="data-doctor-id=${doctor.id},data-doctor-name=${doctor.name},data-doctor-specialization=${doctor.specialization}"
                        >
                          <svg
                            class="w-3 h-3 mr-1"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                            ></path>
                          </svg>
                          Jadwal
                        </button>
                        <button
                          class="inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors"
                          th:attr="data-id=${doctor.id}"
                        >
                          <svg
                            class="w-3 h-3 mr-1"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                            ></path>
                          </svg>
                          Hapus
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <!-- Pagination -->
            <div class="bg-gray-50 px-6 py-4 border-t border-gray-200">
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-2">
                  <a
                    th:if="${currentPage > 0}"
                    th:href="@{'/admin'(page=${currentPage - 1})}"
                    class="px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors"
                  >
                    ← Sebelumnya
                  </a>
                  <span class="text-gray-600">
                    Halaman
                    <span
                      class="font-semibold"
                      th:text="${currentPage + 1}"
                    ></span>
                    dari
                    <span class="font-semibold" th:text="${totalPages}"></span>
                  </span>
                  <a
                    th:if="${currentPage + 1 < totalPages}"
                    th:href="@{'/admin'(page=${currentPage + 1})}"
                    class="px-4 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors"
                  >
                    Selanjutnya →
                  </a>
                </div>
              </div>
            </div>
          </div>
        </section>
        <!-- Modal Tambah Janji Temu -->
        <div
          id="add-appointment-modal"
          class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden p-4"
        >
          <div
            class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-left relative max-h-[90vh] overflow-y-auto modal-scroll"
          >
            <button
              onclick="document.getElementById('add-appointment-modal').classList.add('hidden')"
              class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl font-bold z-10"
            >
              &times;
            </button>
            <h3 class="text-xl font-bold mb-4 text-[#17695b]">
              Tambah Janji Temu
            </h3>
            <form class="space-y-4">
              <label class="block"
                >Nama Pasien
                <input
                  type="text"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                />
              </label>
              <label class="block"
                >Dokter
                <select
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                >
                  <option
                    th:each="doc : ${doctors}"
                    th:value="${doc.name}"
                    th:text="${doc.name}"
                  ></option>
                </select>
              </label>
              <label class="block"
                >Tanggal
                <input
                  type="date"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                />
              </label>
              <label class="block"
                >Jam
                <input
                  type="time"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                />
              </label>
              <label class="block"
                >Status
                <select
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                >
                  <option>Terkonfirmasi</option>
                  <option>Menunggu</option>
                  <option>Selesai</option>
                </select>
              </label>
              <button
                type="submit"
                class="w-full px-4 py-2 rounded bg-primary-orange text-white font-semibold hover:bg-primary-orange-dark transition"
              >
                Simpan
              </button>
            </form>
          </div>
        </div>
        <!-- Modal Tambah Dokter -->
        <div
          id="add-doctor-modal"
          class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden p-4"
        >
          <div
            class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-left relative max-h-[90vh] overflow-y-auto modal-scroll"
          >
            <button
              onclick="document.getElementById('add-doctor-modal').classList.add('hidden')"
              class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl font-bold z-10"
            >
              &times;
            </button>
            <h3 class="text-xl font-bold mb-4 text-[#17695b]">Tambah Dokter</h3>
            <form class="space-y-4">
              <label class="block"
                >Nama Dokter
                <input
                  type="text"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                />
              </label>
              <label class="block"
                >Spesialisasi
                <select
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                >
                  <option
                    th:each="spec : ${specializations}"
                    th:value="${spec}"
                    th:text="${spec}"
                  ></option>
                </select>
              </label>
              <label class="block"
                >Jadwal
                <input
                  type="text"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                />
              </label>
              <button
                type="submit"
                class="w-full px-4 py-2 rounded bg-primary-orange text-white font-semibold hover:bg-primary-orange-dark transition"
              >
                Simpan
              </button>
            </form>
          </div>
        </div>
        <!-- Modal Tambah Berita -->
        <div
          id="add-news-modal"
          class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden p-4"
        >
          <div
            class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-left relative max-h-[90vh] overflow-y-auto modal-scroll"
          >
            <button
              onclick="document.getElementById('add-news-modal').classList.add('hidden')"
              class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl font-bold z-10"
            >
              &times;
            </button>
            <h3 class="text-xl font-bold mb-4 text-[#17695b]">Tambah Berita</h3>
            <form
              th:action="@{/admin/news}"
              method="post"
              enctype="multipart/form-data"
              class="space-y-4"
            >
              <label class="block"
                >Judul
                <input
                  type="text"
                  name="title"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                  required
                />
              </label>
              <label class="block"
                >Tanggal
                <input
                  type="date"
                  name="date"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                  required
                />
              </label>
              <label class="block"
                >Isi Artikel
                <textarea
                  name="content"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                  rows="5"
                  required
                ></textarea>
              </label>
              <label class="block"
                >Upload Gambar
                <input
                  type="file"
                  name="image"
                  accept="image/*"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                />
              </label>
              <label class="block"
                >Status
                <select
                  name="status"
                  class="w-full px-3 py-2 rounded border border-gray-200 mt-1"
                >
                  <option value="Publikasi">Publikasi</option>
                  <option value="Draft">Draft</option>
                </select>
              </label>
              <button
                type="submit"
                class="w-full px-4 py-2 rounded bg-primary-orange text-white font-semibold hover:bg-primary-orange-dark transition"
              >
                Simpan
              </button>
            </form>
          </div>
        </div>
        <!-- Modal (reusable for Edit/Hapus) -->
        <div
          id="admin-modal"
          class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden p-4"
        >
          <div
            id="admin-modal-content"
            class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-left relative max-h-[90vh] overflow-y-auto modal-scroll"
          >
            <!-- Content will be injected by JS -->
          </div>
        </div>

        <!-- Modal Bulk Actions -->
        <div
          id="bulk-actions-modal"
          class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden p-4"
        >
          <div
            class="bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-left relative max-h-[90vh] overflow-y-auto modal-scroll"
          >
            <button
              onclick="document.getElementById('bulk-actions-modal').classList.add('hidden')"
              class="absolute top-3 right-3 text-gray-400 hover:text-gray-700 text-2xl font-bold z-10"
            >
              &times;
            </button>
            <h3 class="text-xl font-bold mb-4 text-[#17695b]">
              Bulk Actions (<span id="bulk-selected-count">0</span> doctors
              selected)
            </h3>
            <div class="space-y-4">
              <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
                <p class="text-yellow-800 text-sm">
                  <strong>Selected doctors:</strong>
                  <span id="bulk-selected-names" class="block mt-1"></span>
                </p>
              </div>
              <div class="space-y-3">
                <button
                  id="bulk-set-active"
                  class="w-full px-4 py-2 rounded bg-green-500 text-white font-semibold hover:bg-green-600 transition"
                >
                  🟢 Set Active
                </button>
                <button
                  id="bulk-set-on-leave"
                  class="w-full px-4 py-2 rounded bg-orange-500 text-white font-semibold hover:bg-orange-600 transition"
                >
                  🏖️ Set On Leave
                </button>
                <button
                  id="bulk-lock"
                  class="w-full px-4 py-2 rounded bg-yellow-500 text-white font-semibold hover:bg-yellow-600 transition"
                >
                  🔒 Lock Doctors
                </button>
                <button
                  id="bulk-delete"
                  class="w-full px-4 py-2 rounded bg-red-500 text-white font-semibold hover:bg-red-600 transition"
                >
                  🗑️ Delete Selected
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Doctor Schedule Modal -->
        <div
          id="doctor-schedule-modal"
          class="fixed inset-0 z-50 flex items-center justify-center bg-black/40 hidden p-4"
        >
          <div
            class="bg-white rounded-2xl shadow-2xl p-8 max-w-4xl w-full text-left relative max-h-[90vh] overflow-y-auto"
          >
            <div class="flex items-center justify-between mb-6">
              <div>
                <h3
                  class="text-2xl font-bold text-[#17695b]"
                  id="schedule-modal-title"
                >
                  Jadwal Dokter
                </h3>
                <p class="text-gray-600 mt-1" id="schedule-modal-subtitle">
                  Kelola jadwal praktik dokter
                </p>
              </div>
              <button
                id="close-schedule-modal"
                class="text-gray-400 hover:text-gray-600 transition-colors"
              >
                <svg
                  class="w-6 h-6"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M6 18L18 6M6 6l12 12"
                  ></path>
                </svg>
              </button>
            </div>

            <!-- Doctor Info -->
            <div class="bg-gray-50 rounded-xl p-6 mb-6">
              <div class="flex items-center">
                <div
                  class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mr-4"
                >
                  <span
                    class="text-green-600 font-bold text-xl"
                    id="doctor-initial"
                    >D</span
                  >
                </div>
                <div>
                  <h4 class="text-xl font-bold text-gray-900" id="doctor-name">
                    Nama Dokter
                  </h4>
                  <p class="text-gray-600" id="doctor-specialization">
                    Spesialisasi
                  </p>
                </div>
              </div>
            </div>

            <!-- Current Schedules -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-6">
              <div class="px-6 py-4 border-b border-gray-200">
                <div class="flex items-center justify-between">
                  <div>
                    <h4 class="text-lg font-semibold text-[#17695b]">
                      Jadwal Praktik Saat Ini
                    </h4>
                    <p class="text-gray-600 text-sm mt-1">
                      Daftar jadwal praktik yang sudah diatur
                    </p>
                  </div>
                  <button
                    id="add-schedule-btn"
                    class="px-4 py-2 bg-[#17695b] text-white rounded-lg hover:bg-[#2d5a4f] transition-colors text-sm"
                  >
                    + Tambah Jadwal
                  </button>
                </div>
              </div>

              <div class="overflow-x-auto">
                <table class="min-w-full">
                  <thead class="bg-[#17695b] text-white">
                    <tr>
                      <th class="py-3 px-6 text-left font-semibold">
                        Rumah Sakit
                      </th>
                      <th class="py-3 px-6 text-left font-semibold">Hari</th>
                      <th class="py-3 px-6 text-left font-semibold">Jam</th>
                      <th class="py-3 px-6 text-left font-semibold">
                        Spesialisasi
                      </th>
                      <th class="py-3 px-6 text-left font-semibold">Aksi</th>
                    </tr>
                  </thead>
                  <tbody
                    class="divide-y divide-gray-200"
                    id="schedule-table-body"
                  >
                    <!-- Schedules will be populated here -->
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Add/Edit Schedule Form -->
            <div id="schedule-form-container" class="hidden">
              <div class="bg-gray-50 rounded-xl p-6">
                <h4
                  class="text-lg font-semibold text-[#17695b] mb-4"
                  id="form-title"
                >
                  Tambah Jadwal Praktik
                </h4>
                <form id="schedule-form">
                  <input type="hidden" id="schedule-id" name="id" />
                  <input type="hidden" id="doctor-name-input" name="name" />

                  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                      <label
                        for="hospital"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Rumah Sakit</label
                      >
                      <input
                        type="text"
                        id="hospital"
                        name="hospital"
                        required
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17695b] focus:border-transparent"
                      />
                    </div>

                    <div>
                      <label
                        for="day"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Hari</label
                      >
                      <select
                        id="day"
                        name="day"
                        required
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17695b] focus:border-transparent"
                      >
                        <option value="">Pilih hari</option>
                        <option value="Senin">Senin</option>
                        <option value="Selasa">Selasa</option>
                        <option value="Rabu">Rabu</option>
                        <option value="Kamis">Kamis</option>
                        <option value="Jumat">Jumat</option>
                        <option value="Sabtu">Sabtu</option>
                        <option value="Minggu">Minggu</option>
                      </select>
                    </div>

                    <div>
                      <label
                        for="time"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Jam Praktik</label
                      >
                      <input
                        type="text"
                        id="time"
                        name="time"
                        placeholder="08:00 - 16:00"
                        required
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17695b] focus:border-transparent"
                      />
                    </div>

                    <div>
                      <label
                        for="specialization"
                        class="block text-sm font-medium text-gray-700 mb-2"
                        >Spesialisasi</label
                      >
                      <input
                        type="text"
                        id="specialization"
                        name="specialization"
                        required
                        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#17695b] focus:border-transparent"
                      />
                    </div>
                  </div>

                  <div class="flex items-center justify-end space-x-3 mt-6">
                    <button
                      type="button"
                      id="cancel-schedule-btn"
                      class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors"
                    >
                      Batal
                    </button>
                    <button
                      type="submit"
                      class="px-6 py-2 bg-[#17695b] text-white rounded-lg hover:bg-[#2d5a4f] transition-colors"
                    >
                      Simpan
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <script src="/js/admin.js"></script>
        <script th:inline="javascript">
          // Pass doctor schedules data from Thymeleaf to JavaScript
          window.doctorSchedulesData = /*[[${allDoctorSchedules}]]*/ [];
          console.log("Thymeleaf schedules data:", window.doctorSchedulesData);
        </script>
        <script>
          // Doctor Schedule Modal functionality
          const scheduleModal = document.getElementById(
            "doctor-schedule-modal"
          );
          const scheduleModalTitle = document.getElementById(
            "schedule-modal-title"
          );
          const scheduleModalSubtitle = document.getElementById(
            "schedule-modal-subtitle"
          );
          const doctorInitial = document.getElementById("doctor-initial");
          const doctorName = document.getElementById("doctor-name");
          const doctorSpecialization = document.getElementById(
            "doctor-specialization"
          );
          const scheduleTableBody = document.getElementById(
            "schedule-table-body"
          );
          const scheduleFormContainer = document.getElementById(
            "schedule-form-container"
          );
          const scheduleForm = document.getElementById("schedule-form");
          const formTitle = document.getElementById("form-title");
          const addScheduleBtn = document.getElementById("add-schedule-btn");
          const cancelScheduleBtn = document.getElementById(
            "cancel-schedule-btn"
          );
          const closeScheduleModal = document.getElementById(
            "close-schedule-modal"
          );

          // Open schedule modal
          document.querySelectorAll(".schedule-modal-btn").forEach((btn) => {
            btn.addEventListener("click", () => {
              const doctorId = btn.getAttribute("data-doctor-id");
              const doctorNameValue = btn.getAttribute("data-doctor-name");
              const doctorSpecializationValue = btn.getAttribute(
                "data-doctor-specialization"
              );

              // Update modal content
              scheduleModalTitle.textContent = `Jadwal ${doctorNameValue}`;
              scheduleModalSubtitle.textContent = `Kelola jadwal praktik untuk ${doctorNameValue}`;
              doctorInitial.textContent = doctorNameValue
                .charAt(0)
                .toUpperCase();
              doctorName.textContent = doctorNameValue;
              doctorSpecialization.textContent = doctorSpecializationValue;
              document.getElementById("doctor-name-input").value =
                doctorNameValue;
              document.getElementById("specialization").value =
                doctorSpecializationValue;

              // Load schedules for this doctor
              loadDoctorSchedules(doctorNameValue);

              // Show modal
              scheduleModal.classList.remove("hidden");
            });
          });

          // Close schedule modal
          function closeScheduleModalFunc() {
            scheduleModal.classList.add("hidden");
            scheduleFormContainer.classList.add("hidden");
            scheduleForm.reset();
          }

          closeScheduleModal.addEventListener("click", closeScheduleModalFunc);
          cancelScheduleBtn.addEventListener("click", closeScheduleModalFunc);

          // Close modal when clicking outside
          scheduleModal.addEventListener("click", (e) => {
            if (e.target === scheduleModal) {
              closeScheduleModalFunc();
            }
          });

          // Load doctor schedules
          function loadDoctorSchedules(doctorName) {
            console.log("Loading schedules for doctor:", doctorName);
            console.log(
              "Available schedules data:",
              window.doctorSchedulesData
            );

            // Try to get schedules from Thymeleaf data
            if (
              typeof window.doctorSchedulesData !== "undefined" &&
              window.doctorSchedulesData.length > 0
            ) {
              const doctorSchedules = window.doctorSchedulesData.filter(
                (schedule) => schedule.name === doctorName
              );
              console.log("Found schedules for doctor:", doctorSchedules);
              displaySchedules(doctorSchedules);
            } else {
              // If no schedules data, try to fetch from API
              console.log(
                "No schedules data available, trying to fetch from API..."
              );
              fetch(
                `/admin/api/doctor-schedules/search?doctorName=${encodeURIComponent(
                  doctorName
                )}`
              )
                .then((response) => response.json())
                .then((data) => {
                  console.log("API response:", data);
                  displaySchedules(data);
                })
                .catch((error) => {
                  console.error("Error fetching schedules:", error);
                  displaySchedules([]);
                });
            }
          }

          // Display schedules in table
          function displaySchedules(schedules) {
            console.log("Displaying schedules:", schedules);

            if (!schedules || schedules.length === 0) {
              scheduleTableBody.innerHTML = `
                <tr>
                  <td colspan="5" class="py-8 px-6 text-center text-gray-500">
                    <div class="flex flex-col items-center">
                      <svg class="w-12 h-12 text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                      </svg>
                      <p class="text-lg font-medium">Belum ada jadwal praktik</p>
                      <p class="text-sm">Klik "Tambah Jadwal" untuk menambahkan jadwal praktik</p>
                    </div>
                  </td>
                </tr>
              `;
            } else {
              scheduleTableBody.innerHTML = schedules
                .map(
                  (schedule) => `
                <tr class="hover:bg-gray-50 transition-colors">
                  <td class="py-3 px-6">
                    <div class="flex items-center">
                      <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3">
                        <svg class="w-4 h-4 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                        </svg>
                      </div>
                      <span class="font-medium text-gray-900">${
                        schedule.hospital || "N/A"
                      }</span>
                    </div>
                  </td>
                  <td class="py-3 px-6">
                    <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">${
                      schedule.day || "N/A"
                    }</span>
                  </td>
                  <td class="py-3 px-6">
                    <span class="font-medium text-gray-900">${
                      schedule.time || "N/A"
                    }</span>
                  </td>
                  <td class="py-3 px-6">
                    <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium">${
                      schedule.specialization || "N/A"
                    }</span>
                  </td>
                  <td class="py-3 px-6">
                    <div class="flex items-center space-x-2">
                      <button class="edit-schedule-btn inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors"
                              data-id="${schedule.id || ""}" data-hospital="${
                    schedule.hospital || ""
                  }" data-day="${schedule.day || ""}" data-time="${
                    schedule.time || ""
                  }" data-specialization="${schedule.specialization || ""}">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                        </svg>
                        Edit
                      </button>
                      <button class="delete-schedule-btn inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors"
                              data-id="${schedule.id || ""}">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        Hapus
                      </button>
                    </div>
                  </td>
                </tr>
              `
                )
                .join("");
            }
          }

          // Add schedule button
          addScheduleBtn.addEventListener("click", () => {
            formTitle.textContent = "Tambah Jadwal Praktik";
            scheduleForm.reset();
            document.getElementById("schedule-id").value = "";
            scheduleFormContainer.classList.remove("hidden");
          });

          // Cancel schedule form
          cancelScheduleBtn.addEventListener("click", () => {
            scheduleFormContainer.classList.add("hidden");
            scheduleForm.reset();
          });

          // Schedule form submission
          scheduleForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const formData = new FormData(scheduleForm);
            const data = Object.fromEntries(formData);

            console.log("Schedule data:", data);
            // Here you would typically make an API call to save the schedule

            // Close form and reload schedules
            scheduleFormContainer.classList.add("hidden");
            scheduleForm.reset();

            // Reload schedules (in real app, this would refresh from server)
            const currentDoctorName = doctorName.textContent;
            loadDoctorSchedules(currentDoctorName);
          });

          // Edit schedule functionality (delegated event)
          scheduleTableBody.addEventListener("click", (e) => {
            if (e.target.closest(".edit-schedule-btn")) {
              const btn = e.target.closest(".edit-schedule-btn");
              formTitle.textContent = "Edit Jadwal Praktik";

              document.getElementById("schedule-id").value =
                btn.getAttribute("data-id");
              document.getElementById("hospital").value =
                btn.getAttribute("data-hospital");
              document.getElementById("day").value =
                btn.getAttribute("data-day");
              document.getElementById("time").value =
                btn.getAttribute("data-time");
              document.getElementById("specialization").value =
                btn.getAttribute("data-specialization");

              scheduleFormContainer.classList.remove("hidden");
            }

            if (e.target.closest(".delete-schedule-btn")) {
              const btn = e.target.closest(".delete-schedule-btn");
              if (confirm("Apakah Anda yakin ingin menghapus jadwal ini?")) {
                const id = btn.getAttribute("data-id");
                console.log("Delete schedule with ID:", id);
                // Here you would typically make an API call to delete the schedule
                btn.closest("tr").remove();
              }
            }
          });
        </script>
      </div>
    </div>
  </body>
</html>

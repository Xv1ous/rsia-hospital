<!-- Doctors Table -->
<div th:fragment="fragment">
  <!-- Search and Filter Bar -->
  <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-6">
    <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
      <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
        <div class="flex-1 w-full md:w-auto">
          <div class="relative">
            <input
              type="text"
              id="search-doctors-table"
              placeholder="Cari dokter berdasarkan nama, spesialisasi, atau rumah sakit..."
              class="w-full px-4 py-2 pl-10 pr-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
            />
            <div
              class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
            >
              <svg
                class="h-5 w-5 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>
        </div>
        <div class="flex items-center gap-3">
          <select
            id="filter-specialization-table"
            class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
          >
            <option value="">Semua Spesialisasi</option>
            <option value="Umum">Umum</option>
            <option value="Anak">Anak</option>
            <option value="Bedah">Bedah</option>
            <option value="Jantung">Jantung</option>
            <option value="Saraf">Saraf</option>
            <option value="Gigi">Gigi</option>
            <option value="Mata">Mata</option>
          </select>
          <select
            id="filter-status-table"
            class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent"
          >
            <option value="">Semua Status</option>
            <option value="Aktif">Aktif</option>
            <option value="Cuti">Cuti</option>
            <option value="Dikunci">Dikunci</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <div class="bg-white rounded-xl shadow-lg overflow-hidden mb-8">
    <!-- Table Header -->
    <div class="px-6 py-4 border-b border-gray-200 bg-primary text-white">
      <div class="flex items-center justify-between">
        <div>
          <h3 class="text-lg font-semibold">Dokter</h3>
          <p class="text-sm opacity-90 mt-1">
            <span id="doctors-table-count">0</span> dokter ditemukan
          </p>
        </div>
        <div class="flex items-center space-x-3">
          <button
            onclick="openBulkActionsModal()"
            class="px-4 py-2 bg-white text-primary rounded-lg hover:bg-gray-100 transition-colors text-sm font-medium"
          >
            Bulk Actions
          </button>
          <button
            onclick="openModal('add-doctor')"
            class="px-4 py-2 bg-white text-primary rounded-lg hover:bg-gray-100 transition-colors text-sm font-medium"
          >
            + Tambah Dokter
          </button>
        </div>
      </div>
    </div>

    <!-- Quick Stats Bar -->
    <div class="px-6 py-3 bg-gray-50 border-b border-gray-200">
      <div class="flex items-center space-x-6 text-sm">
        <div class="flex items-center">
          <span class="w-3 h-3 bg-green-500 rounded-full mr-2"></span>
          <span class="text-gray-600">Aktif:</span>
          <span
            class="font-medium ml-1"
            th:text="${#lists.size(doctors.?[(isOnLeave == null or isOnLeave == false) and (isLocked == null or isLocked == false)])}"
            >0</span
          >
        </div>
        <div class="flex items-center">
          <span class="w-3 h-3 bg-orange-500 rounded-full mr-2"></span>
          <span class="text-gray-600">Cuti:</span>
          <span
            class="font-medium ml-1"
            th:text="${#lists.size(doctors.?[isOnLeave != null and isOnLeave == true])}"
            >0</span
          >
        </div>
        <div class="flex items-center">
          <span class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></span>
          <span class="text-gray-600">Dikunci:</span>
          <span
            class="font-medium ml-1"
            th:text="${#lists.size(doctors.?[isLocked != null and isLocked == true])}"
            >0</span
          >
        </div>
      </div>
    </div>

    <!-- Table -->
    <div class="overflow-x-auto">
      <table class="min-w-full">
        <thead class="bg-gray-50">
          <tr>
            <th class="py-3 px-6 text-left font-semibold text-gray-900">
              <input
                type="checkbox"
                id="select-all-doctors"
                class="rounded border-gray-300 text-primary focus:ring-primary"
              />
            </th>
            <th class="py-3 px-6 text-left font-semibold text-gray-900">
              Dokter
            </th>
            <th class="py-3 px-6 text-left font-semibold text-gray-900">
              Spesialisasi
            </th>
            <th class="py-3 px-6 text-left font-semibold text-gray-900">
              Status
            </th>
            <th class="py-3 px-6 text-left font-semibold text-gray-900">
              Jadwal Praktik
            </th>
            <th class="py-3 px-6 text-left font-semibold text-gray-900">
              Aksi
            </th>
          </tr>
        </thead>
        <tbody class="divide-y divide-gray-200">
          <tr
            th:each="doctor : ${doctors}"
            class="hover:bg-gray-50 transition-colors"
          >
            <td class="py-4 px-6">
              <input
                type="checkbox"
                th:value="${doctor.id}"
                th:attr="data-id=${doctor.id}"
                class="doctor-checkbox rounded border-gray-300 text-primary focus:ring-primary"
              />
            </td>
            <td class="py-4 px-6">
              <div class="flex items-center">
                <div
                  class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center mr-3"
                >
                  <span
                    class="text-green-600 font-bold text-sm"
                    th:text="${doctor.name.substring(0, 1)}"
                    >D</span
                  >
                </div>
                <div>
                  <div
                    class="font-medium text-gray-900"
                    th:text="${doctor.name}"
                  >
                    Nama Dokter
                  </div>
                  <div
                    class="text-sm text-gray-500"
                    th:text="${doctor.specialization}"
                  >
                    Spesialisasi
                  </div>
                </div>
              </div>
            </td>
            <td class="py-4 px-6">
              <span
                class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium"
                th:text="${doctor.specialization}"
                >Spesialisasi</span
              >
            </td>
            <td class="py-4 px-6">
              <div class="flex items-center space-x-2">
                <span
                  th:if="${doctor.isOnLeave != null and doctor.isOnLeave == true}"
                  class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-xs font-medium"
                  >Cuti</span
                >
                <span
                  th:if="${doctor.isLocked != null and doctor.isLocked == true}"
                  class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium"
                  >Dikunci</span
                >
                <span
                  th:if="${(doctor.isOnLeave == null or doctor.isOnLeave == false) and (doctor.isLocked == null or doctor.isLocked == false)}"
                  class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium"
                  >Aktif</span
                >
              </div>
            </td>
            <td class="py-4 px-6">
              <div class="text-sm text-gray-600 max-w-xs">
                <div
                  th:each="schedule : ${allDoctorSchedules}"
                  th:if="${schedule.name == doctor.name}"
                  class="mb-1"
                >
                  <span class="font-medium" th:text="${schedule.day}">Hari</span
                  >:
                  <span th:text="${schedule.time}">Jam</span>
                  <span
                    class="text-gray-500"
                    th:text="${'(' + schedule.hospital + ')'}"
                    >(RS)</span
                  >
                </div>
              </div>
            </td>
            <td class="py-4 px-6">
              <div class="flex items-center space-x-2">
                <button
                  th:onclick="'openEditModal(\'doctor\', ' + ${doctor.id} + ')'"
                  class="inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-blue-100 text-blue-700 hover:bg-blue-200 transition-colors"
                >
                  <svg
                    class="w-3 h-3 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"
                    ></path>
                  </svg>
                  Edit
                </button>
                <button
                  class="schedule-modal-btn inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-green-100 text-green-700 hover:bg-green-200 transition-colors"
                  th:attr="data-doctor-id=${doctor.id},data-doctor-name=${doctor.name},data-doctor-specialization=${doctor.specialization}"
                >
                  <svg
                    class="w-3 h-3 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                    ></path>
                  </svg>
                  Jadwal
                </button>
                <button
                  th:onclick="'deleteItem(\'doctor\', ' + ${doctor.id} + ')'"
                  class="inline-flex items-center px-3 py-1.5 rounded-md text-xs font-medium bg-red-100 text-red-700 hover:bg-red-200 transition-colors"
                >
                  <svg
                    class="w-3 h-3 mr-1"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                    ></path>
                  </svg>
                  Hapus
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="px-6 py-4 border-t border-gray-200 bg-gray-50">
      <div class="flex items-center justify-between">
        <div class="flex items-center text-sm text-gray-700">
          <span>Menampilkan</span>
          <select
            id="page-size-table"
            class="mx-2 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-primary focus:border-transparent"
          >
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
            <option value="100">100</option>
          </select>
          <span>dari <span id="total-doctors-table">0</span> dokter</span>
        </div>
        <div class="flex items-center space-x-2">
          <button
            id="prev-page-table"
            class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"
            disabled
          >
            Sebelumnya
          </button>
          <div class="flex items-center space-x-1" id="page-numbers-table">
            <!-- Page numbers will be generated here -->
          </div>
          <button
            id="next-page-table"
            class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed"
            disabled
          >
            Selanjutnya
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
